"use client"

import { BarChartOutlined, LineChartOutlined, LockOutlined, TransactionOutlined } from "@ant-design/icons"
import { UserRole } from "@prisma/client"
import { MenuProps } from "antd"
import { redirect } from "next/navigation"

import Sidebar from "../Sidebar"
import { appconf } from "@/appconf"
import { hasRole } from "@/lib/helpers"
import { useSession } from "@/providers/SessionProvider"

export default function CabinetSidebar() {
    const { session } = useSession()

    const menuItems: MenuProps["items"] = [
        {
            key: "/cabinet/strategies",
            label: "Стратегии",
            icon: (
                <svg height="16" viewBox="0 0 22 23" fill="inherit" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_26_1835)">
                        <path
                            d="M5.65627 7.93757C5.79297 8.28396 5.60957 8.67053 5.24663 8.80099L1.95733 9.98341L10.9997 13.8305L20.0424 9.98695L16.7531 8.80453C16.3901 8.67407 16.2067 8.2875 16.3434 7.94111C16.4801 7.59472 16.8852 7.41968 17.2481 7.55015L21.2852 9.00136C22.2379 9.34384 22.2379 10.6301 21.2852 10.9726L11.3887 15.123C11.138 15.2132 10.8615 15.2132 10.6108 15.123L0.714542 10.969C-0.238176 10.6266 -0.238185 9.3403 0.714541 8.99782L4.7516 7.54661C5.11454 7.41614 5.51957 7.59118 5.65627 7.93757Z"
                            fill="inherit"
                        />
                        <path
                            d="M1.50573 14.1533C1.64231 13.8076 2.04661 13.6331 2.40876 13.7635L10.9997 17.4494L19.5918 13.7745C19.954 13.6444 20.3582 13.8191 20.4946 14.1648C20.631 14.5105 20.4479 14.8963 20.0857 15.0265L11.3876 18.7393C11.1373 18.8293 10.8612 18.8292 10.6109 18.7391L1.91415 15.0151C1.552 14.8848 1.36914 14.4989 1.50573 14.1533Z"
                            fill="inherit"
                        />
                        <path
                            d="M18.4755 18.8782C18.8384 18.7478 19.0219 18.3612 18.8853 18.0148C18.7487 17.6684 18.3437 17.4933 17.9807 17.6237L10.9966 20.7398L4.01062 17.6365C3.64751 17.5065 3.24271 17.682 3.10647 18.0285C2.97023 18.3751 3.15414 18.7614 3.51725 18.8915L10.6091 22.0327C10.8594 22.1223 11.1353 22.1221 11.3855 22.0323L18.4755 18.8782Z"
                            fill="inherit"
                        />
                        <path
                            d="M11.1185 0.100179C11.5091 0.105923 11.8196 0.413822 11.812 0.78789L11.7937 1.69102L13.1071 1.71033C13.4977 1.71608 13.8082 2.02397 13.8006 2.39804C13.793 2.77211 13.4702 3.0707 13.0797 3.06495L10.1161 3.02137C9.46505 3.0118 8.92709 3.50944 8.91445 4.13289C8.90182 4.75633 9.4193 5.2695 10.0703 5.27907L11.9562 5.3068C13.3884 5.32786 14.5268 6.45683 14.4991 7.82841C14.4713 9.19999 13.2878 10.2948 11.8556 10.2737L11.6199 10.2703L11.6016 11.1733C11.594 11.5474 11.2712 11.846 10.8806 11.8402C10.49 11.8345 10.1796 11.5266 10.1871 11.1525L10.2054 10.2495L8.69655 10.2302C8.30597 10.2244 7.99548 9.91652 8.00306 9.54245C8.01064 9.16838 8.33341 8.8698 8.724 8.87554L11.883 8.91912C12.534 8.9287 13.072 8.43105 13.0846 7.80761C13.0973 7.18416 12.5798 6.671 11.9288 6.66142L10.0429 6.63369C8.61068 6.61263 7.47222 5.48367 7.50001 4.11209C7.5278 2.7405 8.71132 1.64569 10.1435 1.66675L10.3792 1.67022L10.3975 0.767089C10.4051 0.393021 10.7279 0.0944353 11.1185 0.100179Z"
                            fill="white"
                        />
                    </g>
                    <defs>
                        <clipPath id="clip0_26_1835">
                            <rect width="22" height="22" fill="white" transform="translate(0 0.100098)" />
                        </clipPath>
                    </defs>
                </svg>
            ),
            onClick: () => redirect("/cabinet/strategies"),
        },
        {
            key: "/cabinet/robots",
            label: "Торговый робот",
            icon: (
                <svg height="16" viewBox="0 0 22 23" fill="inherit" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_30_1704)">
                        <path
                            d="M12.7498 3.39086C13.2762 3.11887 13.6361 2.56954 13.6361 1.93616C13.6361 1.03243 12.9034 0.299805 11.9997 0.299805C11.096 0.299805 10.3633 1.03243 10.3633 1.93616C10.3633 2.56963 10.7233 3.11902 11.2498 3.39097V7.46349H12.7498V3.39086Z"
                            fill="#F7A600"
                        />
                        <path
                            d="M2.25 8.96338C2.25 7.72073 3.25736 6.71338 4.5 6.71338H19.5C20.7426 6.71338 21.75 7.72074 21.75 8.96338V19.0542C21.75 20.2969 20.7426 21.3042 19.5 21.3042H4.5C3.25736 21.3042 2.25 20.2969 2.25 19.0542V8.96338ZM4.5 8.21338C4.08579 8.21338 3.75 8.54916 3.75 8.96338V19.0542C3.75 19.4684 4.08579 19.8042 4.5 19.8042H19.5C19.9142 19.8042 20.25 19.4684 20.25 19.0542V8.96338C20.25 8.54916 19.9142 8.21338 19.5 8.21338H4.5Z"
                            fill="white"
                        />
                        <path
                            d="M10.3635 12.3729C10.3635 12.8247 9.99711 13.1911 9.54524 13.1911C9.09337 13.1911 8.72705 12.8247 8.72705 12.3729C8.72705 11.921 9.09337 11.5547 9.54524 11.5547C9.99711 11.5547 10.3635 11.921 10.3635 12.3729ZM15.2726 12.3729C15.2726 12.8247 14.9063 13.1911 14.4545 13.1911C14.0026 13.1911 13.6363 12.8247 13.6363 12.3729C13.6363 11.921 14.0026 11.5547 14.4545 11.5547C14.9063 11.5547 15.2726 11.921 15.2726 12.3729ZM9.54517 15.7136C9.13096 15.7136 8.79517 16.0494 8.79517 16.4636C8.79517 16.8778 9.13096 17.2136 9.54517 17.2136H14.4543C14.8685 17.2136 15.2043 16.8778 15.2043 16.4636C15.2043 16.0494 14.8685 15.7136 14.4543 15.7136H9.54517Z"
                            fill="white"
                        />
                    </g>
                    <defs>
                        <clipPath id="clip0_30_1704">
                            <rect width="22" height="22" fill="white" transform="translate(0 0.100098)" />
                        </clipPath>
                    </defs>
                </svg>
            ),
            onClick: () => redirect("/cabinet/robots"),
        },
        {
            key: "/cabinet",
            label: "Баланс",
            icon: (
                <svg height="16" viewBox="0 0 24 25" fill="inherit" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M3.63227 5.59643C2.41678 5.85479 1.64088 7.04957 1.89924 8.26506L3.25016 14.6207V18.6001C3.25016 19.8428 4.25752 20.8501 5.50016 20.8501H18.5002C19.7428 20.8501 20.7502 19.8428 20.7502 18.6001V9.60012C20.7502 8.35748 19.7428 7.35012 18.5002 7.35012H17.551L17.0605 5.04243C16.8022 3.82694 15.6074 3.05104 14.3919 3.3094L3.63227 5.59643ZM16.0175 7.35012H5.50016C4.6278 7.35012 3.8714 7.84658 3.49807 8.57237L3.36646 7.95319C3.28034 7.54803 3.53898 7.14977 3.94414 7.06365L14.7038 4.77662C15.1089 4.6905 15.5072 4.94913 15.5933 5.3543L16.0175 7.35012ZM4.75016 9.60012C4.75016 9.1859 5.08595 8.85012 5.50016 8.85012H18.5002C18.9144 8.85012 19.2502 9.1859 19.2502 9.60012V18.6001C19.2502 19.0143 18.9144 19.3501 18.5002 19.3501H5.50016C5.08595 19.3501 4.75016 19.0143 4.75016 18.6001V9.60012Z"
                        fill="inherit"
                    />
                    <path
                        d="M15.4685 11.0145C15.792 11.2732 15.8444 11.7452 15.5857 12.0686L14.5605 13.3501H23C23.4142 13.3501 23.75 13.6859 23.75 14.1001C23.75 14.5143 23.4142 14.8501 23 14.8501H14.5605L15.5857 16.1316C15.8444 16.4551 15.792 16.927 15.4685 17.1858C15.1451 17.4445 14.6731 17.3921 14.4144 17.0686L12.0396 14.1001L14.4144 11.1316C14.6731 10.8082 15.1451 10.7557 15.4685 11.0145Z"
                        fill="white"
                    />
                </svg>
            ),
            onClick: () => redirect("/cabinet"),
        },
        {
            key: "/cabinet/market",
            label: "Онлайн-рынок",
            icon: (
                <svg height="16" viewBox="0 0 24 25" fill="inherit" xmlns="http://www.w3.org/2000/svg">
                    <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M22.75 19.1001C22.75 20.0666 21.9665 20.8501 21 20.8501H3C2.0335 20.8501 1.25 20.0666 1.25 19.1001V5.1001C1.25 4.1336 2.0335 3.3501 3 3.3501H21C21.9665 3.3501 22.75 4.1336 22.75 5.1001V19.1001ZM21 19.3501C21.1381 19.3501 21.25 19.2382 21.25 19.1001V5.1001C21.25 4.96203 21.1381 4.8501 21 4.8501H3C2.86193 4.8501 2.75 4.96203 2.75 5.1001V19.1001C2.75 19.2382 2.86193 19.3501 3 19.3501H21Z"
                        fill="white"
                    />
                    <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M15.75 6.1001H15V7.6001H14.25V13.6001H15V15.1001H15.75V13.6001H16.5V7.6001H15.75V6.1001ZM9.75 10.6001H9V9.1001H8.25V10.6001H7.5V16.6001H8.25V18.1001H9V16.6001H9.75V10.6001Z"
                        fill="inherit"
                    />
                </svg>
            ),
            onClick: () => redirect("/cabinet/market"),
        },
        { type: "divider" },
    ]

    if (hasRole(session.User.roles, [UserRole.ADMIN, UserRole.MANAGER])) {
        menuItems.push({
            key: appconf.routes.default.admin,
            label: "Менеджер",
            icon: <LockOutlined />,
            onClick: () => redirect(appconf.routes.default.admin),
        })
    }

    return <Sidebar items={menuItems} />
}
